-- Accessory Limit Remover for Catalog Avatar Creator (Loadstring Version with Notification)
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Function to show Roblox notification
local function showNotification(message)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "Catalog Avatar Limit Bypasser",
            Text = message,
            Duration = 5, -- Notification lasts 5 seconds
        })
    end)
end

local function getCurrentDescription()
    return Players:GetHumanoidDescriptionFromUserId(player.UserId)
end

local function removeAccessoryLimits(desc)
    local accessories = desc:GetAccessories(true)
    local newAccessories = {}
    local categoryCounts = {}
    
    for _, acc in ipairs(accessories) do
        local cat = acc.AccessoryType
        categoryCounts[cat] = (categoryCounts[cat] or 0) + 1
        table.insert(newAccessories, acc)
    end
    
    for cat, count in pairs(categoryCounts) do
        if count > 1 then
            for i = 1, count do
                local extraAcc = {
                    AssetId = desc[cat .. "AccessoryId"] or 0,
                    AccessoryType = cat,
                    IsLayered = true,
                }
                table.insert(newAccessories, extraAcc)
            end
        end
    end
    
    desc:SetAccessories(newAccessories)
    desc.Shirt = desc.Shirt or 0
    desc.Pants = desc.Pants or 0
    desc.GraphicTShirt = desc.GraphicTShirt or 0
    return desc
end

local function applyUnlimitedAvatar()
    local desc = getCurrentDescription()
    local unlimitedDesc = removeAccessoryLimits(desc)
    humanoid:ApplyDescription(unlimitedDesc)
    print("Accessory limits removed! All equipped items should layer without restrictions.")
end

-- Keybind for re-applying (R key)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.R then
        applyUnlimitedAvatar()
    end
end)

-- Initial apply with notification
wait(2)
applyUnlimitedAvatar()
showNotification("Thanks for using Catalog Avatar Limit Bypasser! From butthole813")

-- Re-apply on character respawn
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = newChar:WaitForChild("Humanoid")
    wait(1)
    applyUnlimitedAvatar()
end)
